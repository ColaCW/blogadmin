<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="shortcut icon" type="image/x-icon" href="/static/img/gaga.jpg">
  <title>编辑博客</title>
  <link rel="stylesheet" href="/static/css/addBlog.css"/>
</head>
<body>
<div id="app" style="height:99%" v-cloak>
  <div class="head">
    <div class="blog-title" v-if="id == ''">新建博客</div>
    <div class="blog-title" v-else>编辑</div>
    <div style="float:right;">
      <div class="push-btn">
        <img src="img/发布.png" style="float: left;width: 25px">
        <div style="float: left;height: 30px;line-height: 30px;margin-left: 5px">发布文章</div>
        <div style="clear: both"></div>
      </div>
      <div class="user">
        <img src="../static/img/gaga.jpg" class="layui-nav-img" style="border-radius:16px;width:30px">
      </div>
    </div>
    <div style="clear: both"></div>
  </div>
  <div class="tool-bar">
    <div class="return-box">
      <img src="img/返回.png" style="float: left;width: 20px;margin-top: 5px;">
      <div style="float: left;height: 30px;line-height: 30px;margin-left: 5px">返回后台</div>
      <div style="clear: both"></div>
    </div>
    <div class="upload-box" title="上传"><img src="img/上传.png" style="width: 30px"></div>
    <div class="save-box" title="保存"><img src="img/保存.png" style="width: 30px"></div>
  </div>
  <div class="main">
    <div class="input-region">
      <textarea id="content" @keyup="compile()"></textarea>
    </div>
    <div class="result-region">
      <div id="result"></div>
    </div>
    <div style="clear: both;"></div>
  </div>
</div>
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/store.min.js"></script>
<script type="text/javascript" src="/static/js/vue.min.js"></script>
<script type="text/javascript" src="/static/js/showdown.js"></script>
<script type="text/javascript">
  var app = new Vue({
    el:"#app",
    data:{
      id:"",
    },
    methods:{
      init:function () {
        var that = this;
        that.id = that.getParam("","id","");
        console.log(that.id)
      },
      getParam: function (url, name, defaultValue) {
        if (typeof (url) == 'undefined' || !url) {
          url = window.location.search.substr(1);
        }
        var i = url.indexOf('#');
        if (i != -1) {
          url = url.substring(0, i);
        }
        i = url.indexOf('?');
        if (i != -1) {
          url = url.substring(i + 1);
        }
        url = '&' + url + '&';
        var key = '&' + name + '=';
        var i = url.indexOf(key);
        if (i != -1) {
          var j = url.indexOf('&', i + key.length);
          if (j != -1) {
            return url.substring(i + key.length, j);
          }
        }
        return defaultValue;
      },
      getSrc:function(s){
        if(s && s.indexOf("http")==-1){
          s=this.host+"/"+s;
        }else{
          s='/f/_.gif';
        }
        return s;
      },
      compile:function(){
        var text = document.getElementById("content").value;
        var converter = new showdown.Converter();
        var html = converter.makeHtml(text);
        console.log(html)
        document.getElementById("result").innerHTML = html;
      }
    }
  })
  app.init();
</script>
</body>
</html>
